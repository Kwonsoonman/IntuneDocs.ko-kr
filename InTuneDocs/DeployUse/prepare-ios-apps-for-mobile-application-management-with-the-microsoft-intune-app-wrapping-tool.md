---
title: "アプリ ラッピング ツールで iOS アプリをラップする |Microsoft Intune"
description: "このトピックの情報を使用して、アプリ自体のコードを変更することなく、iOS アプリをラップする方法について説明します。 モバイル アプリ管理ポリシーを適用できるように、アプリを準備します。"
keywords: 
author: karthikaraman
manager: angrobe
ms.date: 07/28/2016
ms.topic: article
ms.prod: 
ms.service: microsoft-intune
ms.technology: 
ms.assetid: 99ab0369-5115-4dc8-83ea-db7239b0de97
ms.reviewer: matgates
ms.suite: ems
translationtype: Human Translation
ms.sourcegitcommit: bebf57269ae41f04a47240063cde4a4dd0bf334f
ms.openlocfilehash: 3d9def8f906746cf6e3d014d251b94406d839067


---

# Intune アプリ ラッピング ツールでモバイル アプリケーションを管理するために iOS アプリを準備する
**iOS 用 Microsoft Intune アプリ ラッピング ツール**を使用して社内 iOS アプリの動作を変更すれば、アプリ自体のコードを変更しなくてもアプリの機能を制限できます。

このツールはアプリを囲むように "ラッパー" を作成する Mac OS コマンド ライン アプリケーションです。 アプリが処理されたら、ユーザーが構成する[モバイル アプリケーション管理ポリシー](configure-and-deploy-mobile-application-management-policies-in-the-microsoft-intune-console.md)を利用してアプリの機能を変更できます。

このツールをダウンロードするには、「[iOS 用 Microsoft Intune アプリ ラッピング ツール](http://www.microsoft.com/en-us/download/details.aspx?id=45218)」を参照してください。

## 手順 1: アプリ ラッピング ツールを使用するための前提条件を満たす
前提条件とその設定方法の詳細については、[このブログ投稿](http://social.technet.microsoft.com/wiki/contents/articles/34339.skype-for-business-online-enable-your-tenant-for-modern-authentication.aspx)をご覧ください。

|要件|詳細情報|
|---------------|--------------------------------|
|サポートされるオペレーティング システムとツールセット|このアプリ ラッピング ツールは XCode ツールセットのバージョン 5 以降がインストールされている OS X 10.8.5 以降を実行している Mac コンピューターで実行する必要があります。|
|署名証明書とプロビジョニング プロファイル|Apple 署名証明書とプロビジョニング プロファイルを持っている必要があります。 [Apple 開発者ドキュメント](https://developer.apple.com/)を参照してください。|
|App Wrapping Tool でアプリを処理する|アプリはあなたの会社または独立系ソフトウェア ベンダー (ISV) が開発し、署名したものでなければなりません。 このツールを使用し、Apple ストアのアプリを処理することはできません。 アプリは iOS 7.1 以降向けとして作成されている必要があります。 また、アプリは PIE (Position Independent Executable/位置独立実行) 形式にする必要があります。 PIE 形式に関する詳細については、Apple 開発者ドキュメントを参照してください。 最後に、アプリの拡張子形式は **.app** または **.ipa** にする必要があります。|
|ラッピング ツールで処理できないアプリ|暗号化されたアプリ、署名のないアプリ、および拡張ファイル属性があるアプリ。|
|Azure Active Directory Library (ADAL) を使用するアプリ|アプリで ADAL を使用している場合、アプリには 1.0.2 以上のバージョンの ADAL を組み込む必要があります。また、開発者は、Intune モバイル アプリケーション管理リソースに対するアクセス権をアプリに付与する必要があります。<br /><br />ADAL の使用方法の詳細については、この記事内の「[Azure Active Directory Library を使用するアプリの情報](prepare-ios-apps-for-mobile-application-management-with-the-microsoft-intune-app-wrapping-tool.md#information-for-apps-that-use-the-azure-active-directory-library)」を参照してください。|
|アプリの権利の設定|アプリをラップする前に、権利を設定して、通常よりも多くのアクセス許可や機能をアプリに付与しておく必要があります。 手順については、「[アプリ権限の設定](#setting-app-entitlements)」を参照してください。|

## 手順2: アプリ ラッピング ツールをインストールする

1.  **Microsoft ダウンロード センター**の「[iOS 用 Microsoft Intune アプリ ラッピング ツール](https://www.microsoft.com/download/details.aspx?id=45218)」ページから、アプリ ラッピング ツールのインストール ファイルを Mac コンピューターにダウンロードします。

2.  Mac コンピューターで、インストール ファイル [**Microsoft Intune App Wrapping Tool for iOS.dmg**] をダブルクリックします。

3.  **[同意]** を選択し、使用許諾契約書 (EULA) を受諾します。 インストーラーがマウントされ、Mac コンピューターに表示されます。

4.  インストーラーを開き、表示されているファイルを Mac コンピューターの新しいフォルダーにコピーします。 これでマウントされたインストーラー ドライブを切断できるようになります。

    これでアプリ ラッピング ツールを実行する準備が整いました。

## 手順 3: アプリ ラッピング ツールを実行する

1.  Mac コンピューターで、ターミナル ウィンドウを開き、ファイルを保存したフォルダーに移動します。 実行可能ファイルはパッケージ内にあるため、コマンドを次のように実行する必要があります。
```
    ./IntuneMAMPackager/Contents/MacOS/IntuneMAMPackager –i /<path of input app>/<app filename> -o /<path to output folder>/<app filename> –p /<path to provisioning profile> –c <SHA1 hash of the certificate> -a <client ID of input app> -r <reply URI of input app> -v true
```
    > [!NOTE]
    > Some parameters are optional as shown in the table below.

    **Example:** The following example command runs the app wrapping tool on an app named **MyApp.ipa**. A provisioning profile and SHA-1 hash are specified. The processed app is created and stored in the **/users/myadmin/Documents** on the Mac computer.

    ```
    /users/myadmin/Downloads/IntuneMAMPackager.app/Contents/MacOS/IntuneMAMPackager -i /users/myadmin/Downloads/MyApp.ipa -o /users/myadmin/Documents/MyApp_Wrapped.ipa -p /users/myadmin/Downloads/My_Provisioning_Profile_.mobileprovision -c 12A3BC45D67EF8901A2B3CDEF4ABC5D6E7890FAB –a 20e1cd0d-268e-4308-9583-02ae97dd353e –r https://contoso/ -v true
    ```
    You can use the following command line properties with the app wrapping tool:

|プロパティ|説明|
  |------------|--------------------|
  |**-h**|アプリ ラッピング ツールに使用できるコマンド ライン プロパティを表示します。|
  |**-i**|入力アプリのパスとファイル名を指定します。|
  |**-o**|処理したアプリを保存するパスを指定します。|
  |**-p**|iOS アプリのプロビジョニング プロファイルのパスを指定します。|
  |**-c**|署名証明書の SHA1 ハッシュを指定します。|
  |**-a**|アプリで Azure Active Directory ライブラリが使用される場合、入力アプリのクライアント ID (GUID の形式) (省略可能)。|
  |**-r**|アプリで Azure Active Directory ライブラリが使用される場合、入力アプリのリダイレクト URI (省略可能)。|
  |**-v**|コンソールに詳細なメッセージを出力します (省略可能)。|

2. 処理が完了すると、「 **The application was successfully wrapped (アプリのラッピングが完了しました)** 」というメッセージが表示されます。

    エラーが発生した場合、対処方法については、「[エラー メッセージ](prepare-ios-apps-for-mobile-application-management-with-the-microsoft-intune-app-wrapping-tool.md#error-messages)」を参照してください。

3.  ラッピングされたアプリは先に指定した出力フォルダーに保存されます。 これでアプリを [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)] にアップロードし、モバイル アプリケーション管理ポリシーに関連付けることができます。

    > [!IMPORTANT]
    > アプリは新しいアプリとしてアップロードする必要があります。 古い、ラッピングされていないバージョンのアプリを更新することはできません。

    これで、アプリを [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)] グループに展開し、指定したアプリの制限を使用してデバイスでアプリを実行できるようになりました。

## エラー メッセージとログ ファイル
アプリ ラッピング ツールに関する問題を解決するには、次の情報を参照してください。

### エラー メッセージ
アプリ ラッピング ツールが正常に完了できない場合、次のエラー メッセージのいずれかが表示されます。

|エラー メッセージ|説明|
|-----------------|--------------------|
|有効な iOS プロビジョニング プロファイルを指定する必要があります。|プロビジョニング プロファイルが有効ではない可能性があります。 デバイスのアクセス許可が与えられていることとプロファイルの目標が開発または配布であることを確認します。 プロビジョニング プロファイルが期限切れになっている可能性もあります。|
|有効な入力アプリケーション名を指定します。|指定した入力アプリケーション名が正しいことを確認します。|
|出力アプリケーションの有効なパスを指定します。|指定した出力アプリケーションのパスが存在し、正しいことを確認します。|
|有効な入力プロビジョニング プロファイルを指定します。|有効なプロビジョニング プロファイル名と拡張子を指定したことを確認します。 プロビジョニング プロファイルに権利が足りないか、**–p** コマンドライン オプションを追加していない可能性があります。|
|指定した入力アプリケーションが見つかりませんでした。 有効な入力アプリケーションの名前とパスを指定します。|入力アプリ パスが有効であり、存在することを確認します。 入力アプリがその場所に存在することを確認します。|
|指定した入力プロビジョニング プロファイル ファイルが見つかりませんでした。 有効な入力プロビジョニング プロファイル ファイルを指定します。|入力のプロビジョニング ファイルのパスが有効であり、指定したファイルが存在することを確認します。|
|指定した出力アプリケーション フォルダーが見つかりませんでした。 出力アプリケーションの有効なパスを指定します。|指定した出力パスが有効であり、存在することを確認します。|
|出力アプリに .ipa 拡張子がありません。|アプリ ラッピング ツールは [ **.app** ] 拡張子と [ **.ipa** ] 拡張子があるアプリのみを受け取ります。 出力ファイルに有効な拡張子があることを確認します。|
|無効な署名証明書が指定されました。 有効な Apple 署名証明書を指定します。|Apple 開発者ポータルから適切な署名証明書をダウンロードしていることを確認します。 証明書の期限が切れている可能性があります。 Apple 証明書とプロビジョニング プロファイルを使用し、Xcode 内で正しくアプリに署名できる場合、それらはアプリ ラッピング ツールで有効です。|
|指定した入力アプリケーションが無効です。 有効なアプリケーションを指定します。|.app または .ipa ファイルとしてコンパイルされた有効な iOS アプリケーションがあることを確認します。|
|指定した入力アプリケーションが暗号化されています。 有効な暗号化されていないアプリケーションを指定します。|アプリ ラッピング ツールでは、暗号化されたアプリはサポートされません。 暗号化されていないアプリを指定します。|
|指定した入力アプリケーションは PIE (Position Independent Executable/位置独立実行) 形式ではありません。 PIE 形式の有効なアプリケーションを指定します。|PIE (Position Independent Executable/位置独立実行) アプリは実行時にランダム メモリ アドレスで読み込むことができて、セキュリティ上の利点となります。 詳細については、Apple 開発者ドキュメントを参照してください。|
|指定した入力アプリは既にラッピングされています。 ラッピングされていない有効なアプリケーションを指定します。|このツールによって既に処理されているアプリを処理することはできません。 アプリを再度処理する場合、元のバージョンのアプリを使用し、ツールを実行します。|
|指定した入力アプリケーションは署名されていません。 署名されている有効なアプリケーションを指定します。|アプリ ラッピング ツールでは、アプリに署名が必要です。 ラッピングされたアプリに署名する方法については、開発者ドキュメントを参照してください。|
|指定した入力アプリケーションは .ipa または .app 形式である必要があります。|アプリ ラッピング ツールは .app 拡張子と .ipa 拡張子のみを受け取ります。 入力ファイルに有効な拡張子があり、.app または .ipa ファイルとしてコンパイルされていることを確認します。|
|指定した入力アプリは既にラッピングされていて、最新のポリシー テンプレート バージョンです。|アプリ ラッピング ツールは、既にラッピングされ、ポリシー テンプレート バージョンが最新のアプリを再ラッピングしません。|
|指定した Azure Active Directory クライアント ID が整形式 GUID ではありません。 有効なクライアント ID を指定してください。|クライアント ID パラメーターを使用するとき、有効なクライアント ID を GUID 形式で指定していることを確認します。|
|指定した Azure Active Directory 応答 URI が整形式 URI ではありません。 有効な応答 URI を指定してください。|応答 URI のコマンドライン プロパティを使用するとき、有効な応答 URI を指定していることを確認します。|
|警告: SHA1 証明書ハッシュを指定しませんでした。 展開前にラッピングされたアプリケーションが署名されていることを確認します。|( **–c** コマンドライン プロパティを使用して) 有効な SHA ハッシュを指定します。|

### アプリ ラッピング ツールのログ ファイル
アプリ ラッピング ツールでラッピングされているアプリはログを生成し、ログが iOS クライアント デバイス コンソールに書き込まれます。 この情報は、アプリケーションで問題が発生し、問題がラッピング ツールに関連する場合の診断に必要な状況で役立ちます。 この情報を取得するには、次の手順を使用します。

1.  アプリケを実行し、問題を再現します。

2.  「 [展開された iOS アプリのデバッグ](https://developer.apple.com/library/ios/qa/qa1747/_index.html)」にある Apple の指示に従い、コンソール出力を集めます。

3.  次のスクリプトをコンソールに入力し、アプリ制限出力の保存ログをフィルター処理します。

    ```
    grep “IntuneAppRestrictions” <text file containing console output> > <required filtered log file name>
    ```
    Microsoft にフィルター処理したログを送信できます。

    > [!NOTE]
    > ログ ファイルで、「build version」という項目は Xcode のビルド バージョンを表します。

    ラッピングしたアプリはまた、アプリのクラッシュ後に電子メールでデバイスからログを直接送信するオプションをユーザーに提供します。 ユーザーはログをあなたに送信し、あなたはそれを調べ、必要に応じて Microsoft に転送できます。

## Azure Active Directory Library を使用するアプリの情報
このセクションの情報は Azure Active Directory Library (ADAL) を使用するアプリにのみ適用されます。 自分のアプリでこのライブラリが使用されているかどうかがわからない場合、アプリの開発者にお問い合わせください。

アプリは 1.0.2 以上のバージョンの ADAL を組み込む必要があります。

ADAL を使用するアプリの場合、次を満たす必要があります。

-   アプリは 1.0.2 以上のバージョンの ADAL を組み込む必要があります。

-   開発者は、Intune モバイル アプリケーション管理リソースに対するアクセス権をアプリに付与する必要があります (「[ADAL を使用するアプリの場合の手順](#steps-to-follow-for-apps-that-use-adal)」を参照してください)。

### 取得する必要がある識別子の概要
ADAL を使用するアプリは Azure 管理ポータル経由で登録し、アプリの 2 つの一意の識別子を取得する必要があります。

|識別子|説明|既定値|
|--------------|--------------------|-----------------|
|**クライアント ID**|Azure Active Directory に登録すると、一意の GUID 識別子がアプリごとに生成されます。<br /><br />アプリ固有のクライアント ID がわかっている場合、その値を指定できます。 わからない場合、既定値を使用する必要があります。|6c7e8096-f593-4d72-807f-a5f86dcc9c77|
|**リダイレクト URI**|アプリを Azure Active Directory に登録するとき、開発者が指定する URI 値。認証トークンがそのエンドポイントに返されるようにします。<br /><br />リダイレクト URI の指定はアプリ ラッピング ツールのオプション パラメーターです。 指定されていない場合は、既定の URI を使用します。|urn:ietf:wg:oauth:2.0:oob|


### ADAL を使用するアプリの場合の手順

1.  どの値を取得する必要があるかについては、「[取得する必要がある識別子の概要](#overview-of-identifiers-you-need-to-get)」を参照してください。

2.  Azure Active Directory で次の手順を実行して、モバイル アプリケーション管理へのアクセスを構成します。

    1. Azure 管理ポータルで既存の Azure Active Directory アカウントにログインします。

    2.  Azure Active Directory で [ **既存の LOB アプリケーションの登録** ] をクリックします。

    3.  構成セクションで、[ **他のアプリケーションの Web API へのアクセスの構成**] を選択します。

    4.  [**他のアプリケーションへのアクセス許可**] セクションの最初のドロップダウン リストから [**Intune モバイル アプリケーション管理**] を選択します。

        これで、アプリ ラッピング ツールでアプリのクライアント ID を使用できるようになります。 アプリのクライアント ID は Azure Active Directory の管理ポータルに表示されます (「[取得する必要がある識別子の概要](#overview-of-identifiers-you-need-to-get)」セクションを参照してください)。

3.  アプリ ラッピング ツールのコマンドライン プロパティとして、**Client-ID** (プロパティ **–a** を使用します) と **Redirect-URI** を使用します。 これらの値がない場合、既定値が使用されます。 両方の値を指定する必要があります。指定しないと、エンドユーザーは処理後のアプリを認証できません。

### 証明書、プロビジョニング プロファイル、認証に関する要件

|要件|説明|
|---------------|-----------|
|プロビジョニング プロファイル|**追加前にプロビジョニング プロファイルが有効であることを確認します** - アプリ ラッピング ツールは、iOS アプリを処理するとき、プロビジョニング プロファイルの有効期限が切れているかどうかを確認しません。 有効期限が切れたプロビジョニング プロファイルが指定された場合も、アプリ ラッピング ツールはそのプロファイルを追加します。iOS デバイスでアプリのインストールに失敗するまで、問題があることはわかりません。|
|証明書|**指定前に証明書が有効であることを確認します** - このツールは、iOS アプリを処理するとき、証明書の有効期限が切れているかどうかを確認しません。 有効期限が切れた証明書のハッシュを指定すると、このツールはアプリを処理し、署名しますが、デバイスにインストールすると失敗します。<br /><br />**パッケージ化されたアプリケーションに署名するために提供された証明書がプロビジョニング プロファイルで一致することを確認します** - このツールは、ラッピングしたアプリケーションに署名するために提供された証明書がプロビジョニング プロファイルで一致することを検証しません。|
|認証|暗号化を機能させるには、デバイスにピン セットを与える必要があります。 ラッピングしたアプリケーションを展開したデバイスで、デバイスのステータス バーに触れると、ユーザーに [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)] で再認証することが要求されます。 ラッピングしたアプリケーションの既定のポリシーは、*再起動時に認証*です。 iOS はアプリを終了し、再起動するとき、外部通知 (電話の着信など) を処理します。<br /><br />ラッピングしたアプリに関しては、同じ公開元の (ラッピングした) アプリにサインインした最初のユーザーがキャッシュされます。 その後、そのユーザーだけがアプリへのアクセスを許可されます。 ユーザーをリセットするには、デバイスの登録を解除し、再登録する必要があります。|

### ADAL に関するトラブルシューティングと技術的な注意事項

-   ADAL リソースが見つからない場合は、このツールは ADAL 動的なライブラリを追加します。 それから、ルート フォルダーで「 **ADALiOS.bundle** 」という名前の ADAL ライブラリを探します。

-   アプリ内の ADAL バイナリ (存在する場合) は検索しません。 アプリが古くなったバージョンにリンクする場合、認証ポリシーが有効になっていると、ログイン中にランタイム エラーが発生することがあります。

-   [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)] AAD トークンを取得し、[!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)] MAM リソース ID を認証します。 ただし、このトークンをなんらかの呼び出しで使用して、トークンの有効性を検証することはありません。 [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)] サインインしているユーザーの UPN のみを読み取って、アプリのアクセス許可を決定します。 AAD トークンはその他のサービスの呼び出しには使用されません。

-   認証トークンは、共有キーチェーンに保存されているため、同じ公開元からのアプリの間で共有されます。 特定のアプリを離す場合、そのアプリに別の署名証明書とプロビジョニング プロファイルを使用する必要があります。

-   クライアント アプリケーションのクライアント ID とリダイレクト URI を提供する場合、ダブル ログイン プロンプトは回避されます。 AAD ダッシュ ボードで、公開された [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)] MAM リソース ID にアクセスする他に、このクライアント ID を登録する必要があります。 登録しない場合、アプリの実行時にログインに失敗します。

## アプリ権利の設定
アプリをラップする前に、アプリに**権利**を付与して、通常のアプリよりも多くのアクセス許可と機能を与えることができます。  **権利ファイル**は、アプリ内に特殊なアクセス許可 (たとえば、共有キーチェーンへのアクセスなど) を指定するコード署名で使用されます。 アプリの開発中に、Xcode 内で特定のアプリケーション サービス (**機能**と呼ばれます) が有効になります。 機能が有効になると、権利ファイルに反映されます。 権利と機能の詳細については、iOS 権利および機能の詳細については、iOS 開発者ライブラリの「[Adding Capabilities (機能の追加)](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AddingCapabilities/AddingCapabilities.html)」を参照してください。 サポートされる機能の一覧については、「[Supported capabilities (サポートされる機能)](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/SupportedCapabilities/SupportedCapabilities.html)」を参照してください。

### iOS 用アプリ ラッピング ツールでサポートされる機能

|機能|説明|推奨される方法|
|--------------|---------------|------------------------|
|アプリ グループ|アプリ グループを使用して、複数のアプリが共有コンテナーにアクセスできるようにします。また、アプリ間の追加のプロセス間通信を許可します。<br /><br />アプリ グループを有効にするには、[**機能**] ウィンドウを開き、[**アプリ グループ**] セクションの [**オン**] スイッチをクリックします。 アプリ グループを追加するか、既存のグループを選択することができます。|アプリ グループを使用する場合は、次のように逆引き DNS 表記を使用します。<br /><br />*group.com.companyName.AppGroup*|
|バックグラウンド モード|バックグラウンド モードを有効にすると、iOS アプリを継続的にバックグラウンドで実行できるようになります。||
|データ保護|データ保護を使用すると、iOS アプリでディスクに保存されているファイルのセキュリティ レベルを追加できます。 データ保護は、特定のデバイスに組み込まれている暗号化ハードウェアを使用して、暗号化された形式でディスクにファイルを保存します。 データ保護を使用するようにアプリをプロビジョニングする必要があります。||
|アプリ内購入|アプリ内購入は、ストアへの接続を有効にしてアプリにストアを直接組み込み、ユーザーから支払いを安全に処理します。 アプリ内購入を使用すると、強化された機能で支払いを収集し、アプリから追加のコンテンツを使用できるようになります。||
|キーチェーンの共有|キーチェーンの共有を有効にすると、同じチームで開発されたアプリ間でキーチェーン内のパスワードを共有できるようになります。|キーチェーンの共有を使用する場合は、次のように逆引き DNS 表記を使用します。<br /><br />*com.companyName.KeychainGroup*|
|個人の VPN|個人の VPN を有効にすると、アプリでネットワーク拡張機能フレームワークを使用して、カスタム システム VPN 構成を作成および制御できるようになります。||
|プッシュ通知|Apple Push Notification サービス (APNs) を使用すると、フォアグラウンドで実行されていないアプリでも、ユーザーに対する情報がある場合にユーザーに通知できます。|プッシュ通知を使用するには、アプリ固有のプロビジョニング プロファイルを使用する必要があります。<br /><br />[Apple 開発者ドキュメント](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AddingCapabilities/AddingCapabilities.html)の手順を実行してください。|
|ワイヤレス アクセサリの構成|ワイヤレス アクセサリの構成を有効にすると、外部アクセサリ フレームワークをプロジェクトに追加し、アプリで MFi Wi-Fi アクセサリを構成できるようになります。||

### 権利を有効にする手順

1.  アプリで機能を有効にします。

    1.  Xcode で、アプリのターゲットに移動し、[**Capabilities**] ウィンドウをクリックします。

    2.  目的の機能を有効にします。 各機能の詳細と正しい値の指定方法については、iOS 開発者ライブラリの「[Adding Capabilities (機能の追加)](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AddingCapabilities/AddingCapabilities.html)」を参照してください。

    3.  処理中に作成した ID をメモします。

    4.  ラップするアプリをビルドして署名します。

2.  プロビジョニング プロファイルで権利を有効にします。

    1.  Apple Developer Member Center にログインします。

    2.  アプリのプロビジョニング プロファイルを作成します。 手順については、「[iOS 用 Intune アプリ ラッピング ツールの前提条件を取得する方法](https://blogs.technet.microsoft.com/enterprisemobility/2015/02/25/how-to-obtain-the-prerequisites-for-the-intune-app-wrapping-tool-for-ios/)」を参照してください。

    3.  プロビジョニング プロファイルで、アプリ内と同じ権利を有効にします。 アプリの開発時に指定したものと同じ ID を指定する必要があります。

    4.  プロビジョニング プロファイル ウィザードを完了し、ファイルをダウンロードします。

3.  すべての前提条件を満たしていることを確認してから、アプリをラップします。

### 権利に関する一般的なエラーのトラブルシューティング
iOS 用アプリ ラッピング ツールで権利のエラーが表示される場合は、次のトラブルシューティング手順を実行します。

|問題|原因|解決方法|
|---------|---------|--------------|
|入力アプリケーションから生成された権利を解析できませんでした。|アプリ ラッピング ツールは、アプリから抽出された権利ファイルを読み取れません。 権利ファイルは、形式が正しくない可能性があります。|アプリの権利ファイルを調査します。 次の詳細な手順に従って調査してください。 権利ファイルを調査する場合、形式が正しくない構文がないかを確認します。 権利ファイルは、XML 形式である必要があります。|
|プロビジョニング プロファイルに足りない権利があります (不足している権利が表示されます)。 不足している権利を含むプロビジョニング プロファイルを使用してアプリを再パッケージします。|プロビジョニング プロファイルで有効な権利と、アプリで有効な機能が一致していません。 この不一致は、一部の機能 (アプリ グループ、キーチェーンのアクセスなど) に関連付けられた ID にも適用されます。|通常、アプリと同じ機能を有効にした新しいプロビジョニング プロファイルを作成できます。 プロファイルとアプリ間で ID が一致しない場合、アプリ ラッピング ツールは可能であれば ID を置き換えます。 新しいプロビジョニング プロファイルを作成した後もこのエラーが発生する場合、**–e** パラメーターを使用して権利を削除できます (以下の「–e パラメーターを使用してアプリから権利を削除する」セクションを参照してください)。|

### 署名済みアプリの既存の権利を検索する
署名済みアプリの既存の権利とプロビジョニング プロファイルを確認するには:

1.  .ipa ファイルを検索して、拡張子を .zip に変更します。

2.  .zip ファイルを展開します。 .app バンドルを含む Payload フォルダーが生成されます。

3.  codesign ツールを使用して、次のように .app バンドルの権利を確認します。

    ```
    $ codesign -d --entitlements :- "Payload/YourApp.app"
    ```
    この `YourApp.app` は、.app バンドルの実際の名前に置き換えます。

4.  セキュリティ ツールを使用して、アプリに組み込まれているプロビジョニング プロファイルの権利を確認します。

    ```
    $ security -D -i "Payload/YourApp.app/embedded.mobileprovision"
    ```
    この `YourApp.app` は、.app バンドルの実際の名前に置き換えます。

### –e パラメーターを使用してアプリから権利を削除する
このコマンドは、権利ファイルに含まれていないアプリで有効になっているすべての機能を削除します。 アプリが使用している権利を削除すると、アプリは損なわれます。 欠落している機能を削除する例とは、既定ですべての機能を備えているベンダー製のアプリがある場合です。

```
./IntuneMAMPackager/Contents/MacOS/IntuneMAMPackager –i /<path of input app>/<app filename> -o /<path to output folder>/<app filename> –p /<path to provisioning profile> –c <SHA1 hash of the certificate> -e
```

## アプリ ラッピング ツールのセキュリティとプライバシー
アプリ ラッピング ツールを使用するとき、セキュリティとプライバシーの次のベスト プラクティスを使用します。

-   指定した署名証明書、プロビジョニング プロファイル、基幹業務アプリは、アプリ ラッピング ツールを実行する同じ Mac コンピューターに置く必要があります。 ファイルが UNC パスにある場合、ファイルに Mac コンピューターからアクセスできることを確認します。 パスは IPsec または SMB 署名を使用して保護する必要があります。

    [!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)] コンソールにインポートしたラッピングしたアプリケーションは、ツールを実行するのと同じコンピューター上に存在する必要があります。 ファイルが UNC パスにある場合、[!INCLUDE[wit_nextref](../includes/wit_nextref_md.md)] コンソールを実行するコンピューターでファイルにアクセスできることを確認します。 パスは IPsec または SMB 署名を使用して保護する必要があります。

-   アプリ ラッピング ツールを Microsoft ダウンロード センター サイトからダウンロードする環境は IPsec または SMB 署名を使用して保護する必要があります。

-   攻撃を防ぐために、処理するアプリは信頼できる配信元のものである必要があります。

-   アプリ ラッピング ツールに指定する出力フォルダーが守られていることを確認します (リモート フォルダーの場合は特に)。

-   ファイル アップロードのダイアログ ボックスを含む iOS アプリでは、アプリに適用されている切り取り、コピー、貼付の制限を回避できます。 たとえば、ファイル アップロードのダイアログ ボックスを利用し、アプリ データのスクリーンショットをアップロードできます。

-   ラッピングされたアプリ内からデバイスのドキュメント フォルダーをユーザーが監視するとき、「 **.msftintuneapplauncher**」という名前のフォルダーが表示されることがあります。 このフォルダーを変更または削除すると、制限付きのアプリの正常な動作に影響を与える可能性があります。

### 関連項目
- [Microsoft Intune によるモバイル アプリケーション管理のためにアプリを準備する方法を決める](decide-how-to-prepare-apps-for-mobile-application-management-with-microsoft-intune.md)</br>
- [Microsoft Intune ポリシーを使用してデバイスの設定と機能を管理する](manage-settings-and-features-on-your-devices-with-microsoft-intune-policies.md)</br>
- [Use the SDK to enable apps for mobile application management (アプリでモバイル アプリケーション管理を実行できるよう SDK を使用する)](use-the-sdk-to-enable-apps-for-mobile-application-management.md)



<!--HONumber=Aug16_HO1-->


